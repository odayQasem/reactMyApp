{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if ('value' in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _get = function get(_x, _x2, _x3) {\n  var _again = true;\n\n  _function: while (_again) {\n    var object = _x,\n        property = _x2,\n        receiver = _x3;\n    _again = false;\n    if (object === null) object = Function.prototype;\n    var desc = Object.getOwnPropertyDescriptor(object, property);\n\n    if (desc === undefined) {\n      var parent = Object.getPrototypeOf(object);\n\n      if (parent === null) {\n        return undefined;\n      } else {\n        _x = parent;\n        _x2 = property;\n        _x3 = receiver;\n        _again = true;\n        desc = parent = undefined;\n        continue _function;\n      }\n    } else if ('value' in desc) {\n      return desc.value;\n    } else {\n      var getter = desc.get;\n\n      if (getter === undefined) {\n        return undefined;\n      }\n\n      return getter.call(receiver);\n    }\n  }\n};\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError('Cannot call a class as a function');\n  }\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== 'function' && superClass !== null) {\n    throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _radium = require('radium');\n\nvar _radium2 = _interopRequireDefault(_radium);\n\nvar _lodashAssign = require('lodash.assign');\n\nvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\nvar findParentNode = function findParentNode(parentClass, child) {\n  var parent = child.parentNode;\n\n  while (parent && (parent.className === undefined || parent.className.indexOf(parentClass) === -1)) {\n    parent = parent.parentNode;\n  }\n\n  return parent;\n};\n\nvar Modal = function (_React$Component) {\n  _inherits(Modal, _React$Component);\n\n  function Modal() {\n    var _this = this;\n\n    _classCallCheck(this, _Modal);\n\n    _get(Object.getPrototypeOf(_Modal.prototype), 'constructor', this).apply(this, arguments);\n\n    this.componentDidMount = function () {\n      document.addEventListener('keydown', _this.handleKeyDown);\n\n      _this.handleBody();\n\n      _this.handleParent();\n    };\n\n    this.componentWillUnmount = function () {\n      document.removeEventListener('keydown', _this.handleKeyDown);\n    };\n\n    this.componentDidUpdate = function () {\n      _this.handleBody();\n\n      _this.handleParent();\n    };\n\n    this.requestHide = function () {\n      var onRequestHide = _this.props.onRequestHide;\n\n      if (onRequestHide) {\n        onRequestHide();\n      }\n    };\n\n    this.handleBackDropClick = function (e) {\n      var backdrop = _this.props.backdrop;\n\n      if (e.target !== e.currentTarget || !backdrop) {\n        return;\n      }\n\n      _this.requestHide();\n    };\n\n    this.handleFocus = function () {\n      _this.focus = true;\n    };\n\n    this.handleBlur = function () {\n      _this.focus = false;\n    };\n\n    this.handleKeyDown = function (e) {\n      var keyboard = _this.props.keyboard;\n\n      var el = _reactDom2['default'].findDOMNode(_this);\n\n      var childrenOpen = el.className.indexOf('children-open') !== -1;\n\n      if (keyboard && _this.focus && e.keyCode === 27 && !childrenOpen) {\n        e.preventDefault();\n        setTimeout(_this.requestHide, 0);\n      }\n    };\n\n    this.handleBody = function () {\n      var openModals = document.getElementsByClassName('modal-backdrop-open');\n\n      if (openModals.length < 1) {\n        document.body.className = document.body.className.replace(/ ?modal-open/, '');\n      } else if (document.body.className.indexOf('modal-open') === -1) {\n        document.body.className += document.body.className.length ? ' modal-open' : 'modal-open';\n      }\n    };\n\n    this.handleParent = function () {\n      var parentNode = findParentNode('modal-backdrop', _reactDom2['default'].findDOMNode(_this));\n\n      if (parentNode) {\n        var isOpen = _this.props.isOpen;\n\n        if (isOpen) {\n          parentNode.className += parentNode.className.length ? ' children-open' : 'children-open';\n          parentNode.style.overflowY = 'hidden';\n        } else {\n          parentNode.className = parentNode.className.replace(/ ?children-open/, '');\n          parentNode.style.overflowY = 'auto';\n        }\n      }\n    };\n  }\n\n  _createClass(Modal, [{\n    key: 'render',\n    value: function render() {\n      var _props = this.props;\n      var className = _props.className;\n      var isOpen = _props.isOpen;\n      var backdropStyles = _props.backdropStyles;\n      var size = _props.size;\n      var dialogStyles = _props.dialogStyles;\n      var children = _props.children;\n      var backDropClass = (0, _classnames2['default'])(['modal-backdrop', className], {\n        'modal-backdrop-open': isOpen\n      }).trim();\n      backdropStyles = (0, _lodashAssign2['default'])({\n        base: {\n          background: 'rgba(0, 0, 0, .7)',\n          opacity: 0,\n          visibility: 'hidden',\n          transition: 'all 0.4s',\n          overflowX: 'hidden',\n          overflowY: 'auto'\n        },\n        open: {\n          opacity: 1,\n          visibility: 'visible'\n        }\n      }, backdropStyles);\n      var dialogClass = (0, _classnames2['default'])(['modal-dialog', size], {\n        'modal-dialog-open': isOpen\n      });\n      dialogStyles = (0, _lodashAssign2['default'])({\n        base: {\n          top: -600,\n          transition: 'top 0.4s'\n        },\n        open: {\n          top: 0\n        }\n      }, dialogStyles);\n      return _react2['default'].createElement('div', {\n        className: backDropClass,\n        style: [backdropStyles.base, isOpen && backdropStyles.open],\n        onClick: this.handleBackDropClick\n      }, _react2['default'].createElement('div', {\n        className: dialogClass,\n        style: [dialogStyles.base, isOpen && dialogStyles.open],\n        tabIndex: '-1',\n        onFocus: this.handleFocus,\n        onBlur: this.handleBlur\n      }, _react2['default'].createElement('div', {\n        className: 'modal-content'\n      }, children)));\n    }\n  }], [{\n    key: 'propTypes',\n    value: {\n      className: _react2['default'].PropTypes.string,\n      isOpen: _react2['default'].PropTypes.bool.isRequired,\n      backdrop: _react2['default'].PropTypes.bool,\n      keyboard: _react2['default'].PropTypes.bool,\n      size: _react2['default'].PropTypes.oneOf(['modal-lg', 'modal-sm', '']),\n      onRequestHide: _react2['default'].PropTypes.func,\n      backdropStyles: _react2['default'].PropTypes.object,\n      dialogStyles: _react2['default'].PropTypes.object,\n      children: _react2['default'].PropTypes.node.isRequired\n    },\n    enumerable: true\n  }, {\n    key: 'defaultProps',\n    value: {\n      isOpen: false,\n      backdrop: true,\n      keyboard: true,\n      size: '',\n      backdropStyles: {},\n      dialogStyles: {}\n    },\n    enumerable: true\n  }]);\n\n  var _Modal = Modal;\n  Modal = (0, _radium2['default'])(Modal) || Modal;\n  return Modal;\n}(_react2['default'].Component);\n\nexports['default'] = Modal;\nmodule.exports = exports['default'];","map":null,"metadata":{},"sourceType":"script"}